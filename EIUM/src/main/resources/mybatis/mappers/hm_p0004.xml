<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.hm_p0004">
	<resultMap id="P0004resultVO" type="HM_P0004VO">
		<result property="emp_CODE" column="EMPLOYEE_CODE" />
		<result property="emp_NAME" column="EMPLOYEE_NAME" />
		<result property="dep_NAME" column="DEPARTMENT_NAME" />
		<result property="emp_NAME_EN" column="EMPLOYEE_NAME_EN" />
		<result property="emp_NAME_HN" column="EMPLOYEE_NAME_HN" />
		<result property="foreign_YN" column="FOREIGNER_YN" />
		<result property="rr_NUM" column="RESIDENT_RESISTRATION_NUMBER" />
		<result property="sex" column="SEX" />
		<result property="birth" column="BIRTH" />
		<result property="contact" column="CONTACT" />
		<result property="final_EDU_CODE" column="FINAL_EDU_CODE" />
		<result property="final_EDU_NAME" column="FINAL_EDU_NAME" />
		<result property="picture" column="PICTURE" />
		<result property="zip_CODE" column="ZIP_CODE" />
		<result property="res_ADDRESS" column="RESIST_ADDRESS" />
		<result property="res_ADDRESS_DETAIL"
			column="RESIST_ADDRESS_DETAIL" />
		<result property="res_ADDRESS_EN" column="RESIST_ADDRESS_EN" />
		<result property="email" column="EMAIL" />
		<result property="card_NUM" column="SUCURITY_CARD_NUMBER" />
		<result property="hh_YN" column="HOUSEHOLD_YN" />
		<result property="hc_YN" column="HANDICAPPED_YN" />
		<result property="country_CODE" column="COUNTRY_CODE" />
		<result property="country_NAME" column="COUNTRY_NAME" />
		<result property="hire_TYPE" column="HIRE_TYPE" />
		<result property="hire_NUM" column="HIRE_NUMBER" />
		<result property="mil_TYPE" column="MILITARY_TYPE" />
		<result property="mil_NUM" column="MILITARY_NUMBER" />


	</resultMap>
	<select id="searchList" resultMap="P0004resultVO"
		parameterType="java.util.Map"> 
      <![CDATA[
         select DISTINCT A.EMPLOYEE_CODE,A.EMPLOYEE_NAME,B.DEPARTMENT_NAME
         ,C.EMPLOYEE_NAME_EN
		,C.EMPLOYEE_NAME_HN
		,C.FOREIGNER_YN
		,C.RESIDENT_RESISTRATION_NUMBER
		,C.SEX
		,C.BIRTH
		,C.CONTACT
		,C.FINAL_EDU_CODE
		,C.FINAL_EDU_NAME
		
		,C.ZIP_CODE
		,C.RESIST_ADDRESS
		,C.RESIST_ADDRESS_DETAIL
		,C.RESIST_ADDRESS_EN
		,C.EMAIL
		,C.SUCURITY_CARD_NUMBER
		,C.HOUSEHOLD_YN
		,C.HANDICAPPED_YN
		,C.COUNTRY_CODE
		,C.COUNTRY_NAME
		,C.HIRE_TYPE
		,C.HIRE_NUMBER
		,C.MILITARY_TYPE
		,C.MILITARY_NUMBER
         
         
         from EMPLOYEE A, DEPARTMENT B,EMPLOYEE_HR_INFO C
         WHERE A.DEPARTMENT_CODE = B.DEPARTMENT_CODE
         AND A.EMPLOYEE_CODE = C.EMPLOYEE_CODE
      ]]>
		<if test="condition != null">
			AND A.EMPLOYEE_CODE like '%'|| #{condition} || '%'
		</if>
		<choose>
			<when test="command == 'doWork'">
				AND A.EMPLOYEE_JOIN_DATE IS NOT null
				AND
				A.EMPLOYEE_RESIGNATION_DATE IS null
			</when>
			<when test="command == 'noWork'">
				AND A.EMPLOYEE_JOIN_DATE IS NOT null
				AND A.EMPLOYEE_RESIGNATION_DATE IS
				NOT null
			</when>
		</choose>

	</select>

	<select id="searchList2" resultType="hashmap"
		parameterType="java.util.Map">

		select *

		from ${command}

	</select>

	<update id="updateData" parameterType="java.util.Map">
		update EMPLOYEE_HR_INFO
		set
		EMPLOYEE_NAME_EN = #{emp_NAME_EN}
		,EMPLOYEE_NAME_HN= #{emp_NAME_HN}
		,FOREIGNER_YN= #{foreign_YN}
		,RESIDENT_RESISTRATION_NUMBER= #{rr_NUM}
		,SEX= #{sex}
		,BIRTH= #{birth}
		,CONTACT= #{contact}
		,FINAL_EDU_CODE=
		#{final_EDU_CODE}
		,FINAL_EDU_NAME= #{final_EDU_NAME}

		,ZIP_CODE=
		#{zip_CODE}
		,RESIST_ADDRESS= #{res_ADDRESS}
		,RESIST_ADDRESS_DETAIL=
		#{res_ADDRESS_DETAIL}
		,RESIST_ADDRESS_EN= #{res_ADDRESS_EN}
		,EMAIL=
		#{email}
		,SUCURITY_CARD_NUMBER= #{card_NUM}
		,HOUSEHOLD_YN= #{hh_YN}
		,HANDICAPPED_YN= #{hc_YN}
		,COUNTRY_CODE= #{country_CODE}
		,COUNTRY_NAME=
		#{country_NAME}
		,HIRE_TYPE= #{hire_TYPE}
		,HIRE_NUMBER= #{hire_NUM}
		,MILITARY_TYPE= #{mil_TYPE}
		,MILITARY_NUMBER= #{mil_NUM}
		where
		TRIM(EMPLOYEE_CODE) = #{emp_CODE}
	</update>

	<insert id="insertData" parameterType="java.util.Map">
		insert into
		EMPLOYEE_HR_INFO(
		EMPLOYEE_CODE
		,EMPLOYEE_NAME_EN
		,EMPLOYEE_NAME_HN
		,FOREIGNER_YN
		,RESIDENT_RESISTRATION_NUMBER
		,SEX
		,BIRTH
		,CONTACT
		,FINAL_EDU_CODE
		,FINAL_EDU_NAME

		,ZIP_CODE
		,RESIST_ADDRESS
		,RESIST_ADDRESS_DETAIL
		,RESIST_ADDRESS_EN
		,EMAIL
		,SUCURITY_CARD_NUMBER
		,HOUSEHOLD_YN
		,HANDICAPPED_YN
		,COUNTRY_CODE
		,COUNTRY_NAME
		,HIRE_TYPE
		,HIRE_NUMBER
		,MILITARY_TYPE
		MILITARY_NUMBER)

		values(
		#{employee_CODE}
		,#{emp_NAME_EN}
		,#{emp_NAME_HN}
		,#{foreign_YN}
		,#{rr_NUM}
		,#{sex}
		,#{birth}
		,#{contact}
		,#{final_EDU_CODE}
		,#{final_EDU_NAME}

		,#{zip_CODE}
		,#{res_ADDRESS}
		,#{res_ADDRESS_DETAIL}
		,#{res_ADDRESS_EN}
		,#{email}
		,#{card_NUM}
		,#{hh_YN}
		,#{hc_YN}
		,#{country_CODE}
		,#{country_NAME}
		,#{hire_TYPE}
		,#{hire_NUM}
		,#{mil_TYPE}
		,#{mil_NUM})
	</insert>



	<delete id="deleteData" parameterType="java.util.Map">
		delete EMPLOYEE_HR_INFO
		where TRIM(EMPLOYEE_CODE) = #{emp_CODE}
	</delete>

</mapper>